"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var oresenGraphCC=function(z,o,e){var t,r,n,i,a,l,c,m,s,u,d,v,p,g,h,y,C,f,b,x,A,S,T,E,k,w,_,j,L,I,F,O=null,H=null;e&&(O=e.stage,H=e.canvasWrap,He());var M=null!==(t=(o=null!==o&&void 0!==o?o:(L=new Object,I=new Object,F=new Array,{x:L,y:I,graph:F})).canvasId)&&void 0!==t?t:"ogcc-canvas",X="",Y=null!==(r=o.canvasY)&&void 0!==r?r:350,B=null!==(n=o.canvasTop)&&void 0!==n?n:30,G=null!==(i=o.canvasLeft)&&void 0!==i?i:10,P=null!==(a=o.canvasRight)&&void 0!==a?a:70,V=null!==(l=o.canvasBottom)&&void 0!==l?l:10,q=null!==(c=o.gridStroke)&&void 0!==c?c:.5,W=null!==(m=o.gridEmStroke)&&void 0!==m?m:q+1,R=null!==(s=o.gridColor)&&void 0!==s?s:"#ddd",J=null===(u=o.zoom)||void 0===u||u,U=null!==(d=o.graphTitle)&&void 0!==d&&d,D=null===(v=o.graphDirection)||void 0===v||v,$=null===(p=o.drowAnimation)||void 0===p||p,N=null!==(g=o.responsiveType)&&void 0!==g?g:"x-only",K={};o.y=null!==(h=o.y)&&void 0!==h?h:new Object,K.unit=null!==(y=o.y.unit)&&void 0!==y?y:"",K.memoriInterval=null!==(C=o.y.memoriInterval)&&void 0!==C?C:10,K.memoriFirstNum=function(){var e;{var t,r;e=void 0===o.y.memoriFirstNum?(t=Oe().min,r=Math.floor(t/K.memoriInterval),r*K.memoriInterval):o.y.memoriFirstNum}return e}(),K.memoriCount=function(){var e;{var t,r,n;e=void 0===o.y.memoriCount?(t=Oe(),r=t.max,n=t.min,Math.ceil(r/K.memoriInterval)-Math.floor(n/K.memoriInterval)):o.y.memoriCount}return e}(),K.gridCount=null!==(f=o.y.gridCount)&&void 0!==f?f:2,K.gridBoldCount=null!==(b=o.y.gridBoldCount)&&void 0!==b?b:1,K.memoriCustomText=null!==(x=o.y.memoriCustomText)&&void 0!==x?x:"";var Q={};o.x=null!==(A=o.x)&&void 0!==A?A:new Object,Q.unit=null!==(S=o.x.unit)&&void 0!==S?S:"",Q.memoriList=null!==(T=o.x.memoriList)&&void 0!==T?T:"",Q.memoriInterval=void 0!==o.x.memoriList?1:o.x.memoriInterval?o.x.memoriInterval:10,Q.memoriFirstNum=null!==(E=o.x.memoriFirstNum)&&void 0!==E?E:0,Q.memoriCount=function(){var e;{var r;e=Q.memoriList?Q.memoriList.length-1-Q.memoriFirstNum:void 0===o.x.memoriCount?(r=0,z.forEach(function(e){var t=e.length;r=r<t?t:r}),r-1):o.x.memoriCount}return e}(),Q.gridCount=null!==(k=o.x.gridCount)&&void 0!==k?k:2,Q.gridBoldCount=null!==(w=o.x.gridBoldCount)&&void 0!==w?w:1,Q.memoriCustomText=null!==(_=o.x.memoriCustomText)&&void 0!==_?_:"";var Z=[];o.graph=null!==(j=o.graph)&&void 0!==j?j:new Object;for(var ee,te,re,ne,oe,ie,ae,le,ce,me,se=0;se<z.length;se++){Z[se]={},o.graph[se]=null!==(ee=o.graph[se])&&void 0!==ee?ee:{},Z[se].graphName=null!==(te=o.graph[se].graphName)&&void 0!==te?te:"",Z[se].dotColor=null!==(re=o.graph[se].dotColor)&&void 0!==re?re:"#999",Z[se].dotSize=null!==(ne=o.graph[se].dotSize)&&void 0!==ne?ne:15,Z[se].dotStyle=null!==(oe=o.graph[se].dotStyle)&&void 0!==oe?oe:"circle",Z[se].lineColor=null!==(ie=o.graph[se].lineColor)&&void 0!==ie?ie:"#999",Z[se].lineStroke=null!==(ae=o.graph[se].lineStroke)&&void 0!==ae?ae:1,Z[se].lineType=null!==(le=o.graph[se].lineType)&&void 0!==le?le:"line",Z[se].hoverCustomText=null!==(ce=o.graph[se].hoverCustomText)&&void 0!==ce?ce:"",Z[se].graphFirstMemori=null!==(me=o.graph[se].graphFirstMemori)&&void 0!==me?me:0}var ue,de,ve,pe,ge,he,ye,Ce,fe,be,xe,Ae,Se,Te,Ee,ke,we,_e,je=document.getElementById(M),H=je.parentElement,Le=parseInt(getComputedStyle(H,null).getPropertyValue("padding-left").replace("px","")),Ie=parseInt(getComputedStyle(H,null).getPropertyValue("padding-right").replace("px","")),Fe=parseInt(getComputedStyle(H,null).getPropertyValue("padding-top").replace("px","")),X=void 0===o.canvasX?parseInt(getComputedStyle(H,null).getPropertyValue("width").replace("px",""))-Le-Ie:o.canvasX,Me=(getComputedStyle(H,null).getPropertyValue("max-width").replace("px","")-Le-Ie)/Y,O=new createjs.Stage(M);createjs.Ticker.timingMode=createjs.Ticker.RAF,O.enableMouseOver();var Ne=[],ze=[];function Oe(){var t=[];return z.forEach(function(e){t=t.concat(e)}),{max:Math.max.apply(Math,_toConsumableArray(t)),min:Math.min.apply(Math,_toConsumableArray(t))}}function He(){_toConsumableArray(H.children).forEach(function(e){"CANVAS"!==e.tagName&&e.remove()}),O.removeAllChildren(),O.removeAllEventListeners()}function Xe(){var b,x,A,S,l,T,E,p,g,h,r,n,c,o,e,t,i,a,m,s,u,d;function v(){b=Y-V,x=X-G,A=K.memoriCount*K.gridCount,S=(b-B)/A,l=(b-B)/K.memoriCount,T=Q.memoriCount*Q.gridCount,E=(x-P)/T,p=(x-P)/Q.memoriCount,g=l/K.memoriInterval,h=p/Q.memoriInterval}function y(e){var t=e.target.x,r=e.target.y,n=this.payload[1],o=this.payload[2],i=_toConsumableArray(H.querySelectorAll(".ogcc-hoverContent")).find(function(e){return e.getAttribute("data-ogccid")==n}),a=this.payload[0]+K.unit;Z[n].hoverCustomText&&(a=Z[n].hoverCustomText.replace(/\[y\]/g,this.payload[0]),a=(a=(a=Q.memoriList?a.replace(/\[x\]/g,Q.memoriList[o+Z[n].graphFirstMemori]):a.replace(/\[x\]/g,Q.memoriInterval*o+Z[n].graphFirstMemori)).replace(/\[unitY\]/g,K.unit)).replace(/\[unitX\]/g,Q.unit)),i.innerHTML=a,i.setAttribute("style","left:".concat(t+G+Le,"px;top:").concat(r+Fe,"px;")),i.classList.add("is_show")}function C(){U&&((we=document.createElement("ul")).setAttribute("class","ogcc-graphTitle"),H.append(we))}function f(){(Ce=document.createElement("div")).setAttribute("class","ogcc-zoomAll"),(xe=document.createElement("div")).setAttribute("class","ogcc-zoomAll_btn is_in"),xe.insertAdjacentHTML("afterbegin",u),Ce.append(xe),(Ae=document.createElement("div")).setAttribute("class","ogcc-zoomAll_btn is_out"),Ae.insertAdjacentHTML("afterbegin",d),Ce.append(Ae),H.append(Ce)}function k(){(fe=document.createElement("div")).setAttribute("class","ogcc-zoomY"),(Se=document.createElement("div")).setAttribute("class","ogcc-zoomY_btn is_in"),Se.insertAdjacentHTML("afterbegin",u),fe.append(Se),(Te=document.createElement("div")).setAttribute("class","ogcc-zoomY_btn is_out"),Te.insertAdjacentHTML("afterbegin",d),fe.append(Te),H.append(fe)}function w(){(be=document.createElement("div")).setAttribute("class","ogcc-zoomX"),(Ee=document.createElement("div")).setAttribute("class","ogcc-zoomX_btn is_in"),Ee.insertAdjacentHTML("afterbegin",u),be.append(Ee),(ke=document.createElement("div")).setAttribute("class","ogcc-zoomX_btn is_out"),ke.insertAdjacentHTML("afterbegin",d),be.append(ke),H.append(be)}function _(){K.memoriCount+=1,Q.memoriCount+=1,N(K.memoriCount/(K.memoriCount+1),Q.memoriCount/(Q.memoriCount-1))}function j(){1<K.memoriCount&&1<Q.memoriCount&&(--K.memoriCount,--Q.memoriCount,N(K.memoriCount/(K.memoriCount-1),Q.memoriCount/(Q.memoriCount+1)))}function L(){K.memoriCount+=1,N(K.memoriCount/(K.memoriCount+1),1)}function I(){1<K.memoriCount&&(--K.memoriCount,N((K.memoriCount+1)/K.memoriCount,1))}function F(){Q.memoriCount+=1,N(1,Q.memoriCount/(Q.memoriCount-1))}function M(){1<Q.memoriCount&&(--Q.memoriCount,N(1,Q.memoriCount/(Q.memoriCount+1)))}function N(e,t){v(),O.removeChild(ye),O.removeChild(he),de.remove(),ve.remove(),pe&&pe.remove(),ge&&ge.remove(),we&&we.remove(),C(),n(),r(),o(e,t)}je&&je.getContext&&(v(),je.setAttribute("style","width: ".concat(X,"px; height: ").concat(Y,"px;")),je.width=2*X,je.height=2*Y,r=function(){(de=document.createElement("ul")).setAttribute("class","ogcc-memoriY"),de.setAttribute("style","top:"+(B+Fe)+"px");for(var e="",t=0;t<=K.memoriCount;t++){var r=K.memoriInterval*(K.memoriCount-t)+K.memoriFirstNum;e+='<li class="ogcc-memoriY_li">'+(K.memoriCustomText?K.memoriCustomText.replace("[n]",r):r)+"</li>"}de.insertAdjacentHTML("afterbegin",e),H.appendChild(de),_toConsumableArray(H.querySelectorAll(".ogcc-memoriY_li")).forEach(function(e,t){e.setAttribute("style","top:"+l*t+"px")}),K.unit&&((pe=document.createElement("span")).setAttribute("class","ogcc-unitY"),pe.innerHTML="（"+K.unit+"）",H.append(pe)),(ve=document.createElement("ul")).setAttribute("class","ogcc-memoriX"),ve.setAttribute("style","left:"+(Le+G)+"px");for(var n="",o=0;o<=Q.memoriCount;o++){var i=void 0,i=0<Q.memoriList.length?Q.memoriList[o]:o*Q.memoriInterval+Q.memoriFirstNum,a="",a=Q.memoriCustomText?Q.memoriCustomText.replace("[n]",i):i;Q.memoriList.length&&(a=null==(a=Q.memoriList[o+Q.memoriFirstNum])?"":a),n+='<li class="ogcc-memoriX_li">'+a+"</li>"}ve.insertAdjacentHTML("afterbegin",n),H.appendChild(ve),_toConsumableArray(H.querySelectorAll(".ogcc-memoriX_li")).forEach(function(e,t){e.setAttribute("style","left:"+p*t+"px")}),Q.unit&&((ge=document.createElement("span")).setAttribute("class","ogcc-unitX"),ge.innerHTML="（"+Q.unit+"）",H.append(ge))},c=function(){document.querySelector(".ogcc-hoverContent.is_show").classList.remove("is_show")},o=function(s,u){var d=null;(u||s)&&(d=JSON.parse(JSON.stringify(ze))),(ye=new createjs.Container).x=G,ye.y=0,O.addChild(ye);for(var v=[],e=0;e<z.length;e++)v[e]=new createjs.Container,ze[e]={point:[],line:[],curve:[]},function(e){var t=new createjs.Graphics;t.beginStroke(Z[e].lineColor),t.setStrokeStyle(Z[e].lineStroke);for(var r,n,o=z[e],i=0;i<o.length;i++){var a=i*p-h*Q.memoriFirstNum+h*Z[e].graphFirstMemori,l=b-(o[i]-K.memoriFirstNum)*g,c=[r+50,n,a-50,l,a,l];"line"===Z[e].lineType?ze[e].line[i]={x:a,y:l}:ze[e].curve[i]=c,""!==o[i]&&(0===i&&t.moveTo(a,l),i===o.length?t.beginStroke("transparent").lineTo(a,b).beginStroke("transparent").lineTo(0,b).beginStroke("transparent").closePath():"line"===Z[e].lineType?t.lineTo(a,l):t.bezierCurveTo.apply(t,c));var m=new createjs.Shape(t);d?(m.scaleY=s,m.scaleX=u):(m.scaleY=0,m.y=b/2),v[e].addChild(m),$?createjs.Tween.get(m).to({scaleY:1,scaleX:1,y:0},700,createjs.Ease.cubicOut):(m.scaleY=1,m.scaleX=1,m.y=0),r=a,n=l}}(e),function(e){for(var t="",r=z[e],n=0;n<r.length;n++){var o,i,a;""!==r[n]&&(o=n*p-h*Q.memoriFirstNum+h*Z[e].graphFirstMemori,i=b-(r[n]-K.memoriFirstNum)*g,ze[e].point[n]={x:o,y:i},(t=new createjs.Graphics).beginFill(Z[e].dotColor),"circle"===Z[e].dotStyle?t.drawCircle(0,0,Z[e].dotSize/2):"rect"===Z[e].dotStyle&&t.drawRect(-Z[e].dotSize/2,-Z[e].dotSize/2,Z[e].dotSize,Z[e].dotSize),(a=new createjs.Shape(t)).x=o,d?(a.x=d[e].point[n].x,a.y=d[e].point[n].y):a.y=b/2,v[e].addChild(a),$?createjs.Tween.get(a).to({x:o,y:i},700,createjs.Ease.cubicOut):(a.x=o,a.y=i),a.addEventListener("mouseover",{payload:[r[n],e,n],handleEvent:y}),a.addEventListener("mouseout",c))}}(e),function(e){{var t,r,n;U&&Z[e].graphName&&(t=Z[e].graphName,(r=document.createElement("li")).setAttribute("class","ogcc-graphTitle_one"),n='<span class="ogcc-graphTitle_one_cl" style="background-color:'+Z[e].lineColor+';"></span><span class="ogcc-graphTitle_one_name">'+t+"</span>",r.insertAdjacentHTML("afterbegin",n),we.append(r),r.addEventListener("click",function(){v[e].visible?(v[e].visible=!1,r.classList.add("is_hide")):(v[e].visible=!0,r.classList.remove("is_hide"))}))}}(e),ye.addChild(v[e]);createjs.Ticker.addEventListener("tick",O)},(n=function(){if((he=new createjs.Container).x=0,he.y=0,O.addChild(he),q){for(var e=0;e<A;e++){var t=new createjs.Graphics;t.beginStroke(R),t.setStrokeStyle(q);var r=S*e;t.moveTo(G,r+B).lineTo(X+G,r+B).endStroke();var n=new createjs.Shape(t);he.addChild(n)}for(var o=0;o<=T;o++){var i=new createjs.Graphics;i.beginStroke(R),i.setStrokeStyle(q);var a=E*o+G;i.moveTo(a,0).lineTo(a,b).endStroke();var l=new createjs.Shape(i);he.addChild(l)}}if(W){for(var c=K.memoriCount*K.gridBoldCount,m=(b-B)/c,s=0;s<=c;s++){var u=new createjs.Graphics;u.beginStroke(R),u.setStrokeStyle(W);var d=m*s;u.moveTo(0,d+B).lineTo(X+G,d+B).endStroke();var v=new createjs.Shape(u);he.addChild(v)}for(var p=Q.memoriCount*Q.gridBoldCount,g=(x-P)/p,h=0;h<=p;h++){var y=new createjs.Graphics;y.beginStroke(R),y.setStrokeStyle(W);var C=g*h+G;y.moveTo(C,0).lineTo(C,b+V).endStroke();var f=new createjs.Shape(y);he.addChild(f)}}})(),function(){(ue=new createjs.Container).x=G,ue.y=0,O.addChild(ue);var e=new createjs.Graphics;e.beginStroke("#999"),e.setStrokeStyle(1),e.moveTo(0,0).lineTo(0,b-1).lineTo(X,b-1).endStroke();var t=new createjs.Shape(e);ue.addChild(t)}(),r(),C(),o(),D&&(e=function(n,o){if(null!=s){s=null,de.remove(),ve.remove(),pe&&pe.remove(),ge&&ge.remove();for(var e=ye.children.length,t=0;t<e;t++)ye.children[t].children.forEach(function(e){var t=e.y,r=e.x;"top"===n||"bottom"===n?createjs.Tween.get(e,{override:!1}).to({y:t+o},500,createjs.Ease.cubicOut).call(function(){s=o}):createjs.Tween.get(e,{override:!1}).to({x:r+o},500,createjs.Ease.cubicOut).call(function(){s=o})});"top"===n?K.memoriFirstNum=K.memoriFirstNum+K.memoriInterval:"right"===n?Q.memoriFirstNum=Q.memoriFirstNum+Q.memoriInterval:"bottom"===n?K.memoriFirstNum=K.memoriFirstNum-K.memoriInterval:"left"===n&&(Q.memoriFirstNum=Q.memoriFirstNum-Q.memoriInterval),r()}},(_e=document.createElement("div")).setAttribute("class","ogcc-direction"),(t=document.createElement("span")).setAttribute("class","ogcc-direction_part is_top"),(i=document.createElement("span")).setAttribute("class","ogcc-direction_part is_right"),(a=document.createElement("span")).setAttribute("class","ogcc-direction_part is_bottom"),(m=document.createElement("span")).setAttribute("class","ogcc-direction_part is_left"),_e.insertAdjacentElement("afterbegin",t),_e.insertAdjacentElement("afterbegin",i),_e.insertAdjacentElement("afterbegin",a),_e.insertAdjacentElement("afterbegin",m),s=!0,t.addEventListener("click",function(){e("top",l)}),i.addEventListener("click",function(){e("right",-p)}),a.addEventListener("click",function(){e("bottom",-l)}),m.addEventListener("click",function(){e("left",p)}),H.append(_e)),u='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#4a4a4a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg>',d='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#4a4a4a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg>',J&&(!0===J?(f(),k(),w(),xe.addEventListener("click",j),Ae.addEventListener("click",_),Se.addEventListener("click",I),Te.addEventListener("click",L),Ee.addEventListener("click",M),ke.addEventListener("click",F)):"xy"===J?(f(),xe.addEventListener("click",j),Ae.addEventListener("click",_)):"x"===J?(w(),Ee.addEventListener("click",M),ke.addEventListener("click",F)):"y"===J&&(k(),Se.addEventListener("click",I),Te.addEventListener("click",L))),function(){for(var e=0;e<Z.length;e++)Ne[e]=document.createElement("div"),Ne[e].setAttribute("class","ogcc-hoverContent"),Ne[e].setAttribute("data-ogccid",e),H.appendChild(Ne[e])}(),O.scale=2)}function Ye(e){var t=parseInt(getComputedStyle(H,null).getPropertyValue("width").replace("px",""));function r(){X=t-Le-Ie,"aspect"===N&&(Y=X/Me),e||(He(),Xe(),O.update())}e?r():(clearTimeout(void 0),setTimeout(function(){r()},100))}return Ye("nonUpdate"),Xe(),window.addEventListener("resize",function(){Ye()}),{stage:O,canvasWrap:H}},_default=oresenGraphCC;exports.default=oresenGraphCC;